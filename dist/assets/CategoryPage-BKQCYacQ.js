import{b as j,r,s as l,j as e,L as m,H as f}from"./index-BnOxMvvE.js";import{B as g}from"./Breadcrumb-cAlnVc71.js";import{P as b,a as N}from"./ProductCardSkeleton-DP8o6lnR.js";import"./chevron-right-BWlC3Y7n.js";function q(){const{slug:o}=j(),[s,u]=r.useState(null),[a,p]=r.useState([]),[d,n]=r.useState(!0);r.useEffect(()=>{x()},[o]);async function x(){if(n(!0),!o){n(!1);return}const{data:t}=await l.from("categories").select("*").eq("slug",o).single();if(t){u(t);const{data:i}=await l.from("products").select("*, categories(nome)").eq("category_id",t.id).eq("ativo",!0).order("created_at",{ascending:!1}),h=(i||[]).map(c=>({...c,category:c.categories}));p(h)}n(!1)}return!d&&!s?e.jsxs("div",{className:"container",style:{padding:"64px 24px",textAlign:"center"},children:[e.jsx("h2",{children:"Categoria não encontrada"}),e.jsx(m,{to:"/produtos",className:"btn btn-primary mt-4",children:"Ver Produtos"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(f,{children:[e.jsxs("title",{children:[(s==null?void 0:s.nome)||"Categoria"," — Diamante Azul"]}),e.jsx("meta",{name:"description",content:(s==null?void 0:s.descricao)||`Produtos da categoria ${s==null?void 0:s.nome}`})]}),e.jsx(g,{items:[{label:"Produtos",href:"/produtos"},{label:(s==null?void 0:s.nome)||"..."}]}),e.jsxs("div",{className:"container",style:{padding:"32px 24px 64px"},children:[e.jsxs("div",{className:"section-header mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"section-title",children:s==null?void 0:s.nome}),(s==null?void 0:s.descricao)&&e.jsx("p",{className:"section-subtitle",children:s.descricao})]}),e.jsxs("span",{style:{color:"var(--color-text-muted)",fontSize:14},children:[a.length," produto",a.length!==1?"s":""]})]}),d?e.jsx("div",{className:"product-grid",children:Array.from({length:8}).map((t,i)=>e.jsx(b,{},i))}):a.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{children:"Nenhum produto nesta categoria"}),e.jsx(m,{to:"/produtos",className:"btn btn-primary mt-4",children:"Ver todos os produtos"})]}):e.jsx("div",{className:"product-grid",children:a.map(t=>e.jsx(N,{product:t},t.id))})]})]})}export{q as default};
