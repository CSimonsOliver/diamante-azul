import{b as j,r,s as l,j as s,L as m,H as f}from"./index-CesZUHVg.js";import{B as g}from"./Breadcrumb-fwi0s3ck.js";import{P as b,a as N}from"./ProductCardSkeleton-Dq0RF0wL.js";function S(){const{slug:n}=j(),[e,u]=r.useState(null),[a,p]=r.useState([]),[i,d]=r.useState(!0);r.useEffect(()=>{x()},[n]);async function x(){d(!0);const{data:t}=await l.from("categories").select("*").eq("slug",n).single();if(t){u(t);const{data:o}=await l.from("products").select("*, categories(nome)").eq("category_id",t.id).eq("ativo",!0).order("created_at",{ascending:!1}),h=(o||[]).map(c=>({...c,category:c.categories}));p(h)}d(!1)}return!i&&!e?s.jsxs("div",{className:"container",style:{padding:"64px 24px",textAlign:"center"},children:[s.jsx("h2",{children:"Categoria não encontrada"}),s.jsx(m,{to:"/produtos",className:"btn btn-primary mt-4",children:"Ver Produtos"})]}):s.jsxs(s.Fragment,{children:[s.jsxs(f,{children:[s.jsxs("title",{children:[(e==null?void 0:e.nome)||"Categoria"," — Diamante Azul"]}),s.jsx("meta",{name:"description",content:(e==null?void 0:e.descricao)||`Produtos da categoria ${e==null?void 0:e.nome}`})]}),s.jsx(g,{items:[{label:"Produtos",href:"/produtos"},{label:(e==null?void 0:e.nome)||"..."}]}),s.jsxs("div",{className:"container",style:{padding:"32px 24px 64px"},children:[s.jsxs("div",{className:"section-header mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"section-title",children:e==null?void 0:e.nome}),(e==null?void 0:e.descricao)&&s.jsx("p",{className:"section-subtitle",children:e.descricao})]}),s.jsxs("span",{style:{color:"var(--color-text-muted)",fontSize:14},children:[a.length," produto",a.length!==1?"s":""]})]}),i?s.jsx("div",{className:"product-grid",children:Array.from({length:8}).map((t,o)=>s.jsx(b,{},o))}):a.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("h3",{children:"Nenhum produto nesta categoria"}),s.jsx(m,{to:"/produtos",className:"btn btn-primary mt-4",children:"Ver todos os produtos"})]}):s.jsx("div",{className:"product-grid",children:a.map(t=>s.jsx(N,{product:t},t.id))})]})]})}export{S as default};
