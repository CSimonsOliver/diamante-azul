import{c as E,r as o,s as t,j as e,z as f}from"./index-EEQCH9Mm.js";import{U as j}from"./upload-BRLajjrj.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=E("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function z(){const[s,h]=o.useState({}),[b,v]=o.useState(!0),[g,p]=o.useState(!1),[m,N]=o.useState(null),[d,C]=o.useState(null),[y,_]=o.useState("");o.useEffect(()=>{w()},[]);async function w(){const{data:a}=await t.from("company_settings").select("*").limit(1).single();a&&(h(a),_(a.id)),v(!1)}function l(a,r){h(c=>({...c,[a]:r}))}async function S(a){a.preventDefault(),p(!0);try{let r=s.logo_url,c=s.banner_url;if(m){const i=`logo-${Date.now()}.${m.name.split(".").pop()}`,{error:n}=await t.storage.from("logos").upload(i,m);if(n)throw n;const{data:u}=t.storage.from("logos").getPublicUrl(i);r=u.publicUrl}if(d){const i=`banner-${Date.now()}.${d.name.split(".").pop()}`,{error:n}=await t.storage.from("banners").upload(i,d);if(n)throw n;const{data:u}=t.storage.from("banners").getPublicUrl(i);c=u.publicUrl}const{error:x}=await t.from("company_settings").update({...s,logo_url:r,banner_url:c}).eq("id",y);if(x)throw x;f.success("Configurações salvas!")}catch(r){f.error(r instanceof Error?r.message:"Erro ao salvar")}finally{p(!1)}}return b?e.jsx("div",{className:"skeleton",style:{height:400}}):e.jsxs("div",{children:[e.jsx("h1",{className:"admin-page-title",children:"Configurações da Empresa"}),e.jsxs("form",{onSubmit:S,style:{display:"flex",flexDirection:"column",gap:24},children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"form-section-title",children:"Dados da Empresa"}),e.jsxs("div",{className:"form-row mb-4",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Razão Social"}),e.jsx("input",{value:s.razao_social||"",onChange:a=>l("razao_social",a.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Nome Fantasia"}),e.jsx("input",{value:s.nome_fantasia||"",onChange:a=>l("nome_fantasia",a.target.value)})]})]}),e.jsxs("div",{className:"form-row mb-4",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"CNPJ"}),e.jsx("input",{value:s.cnpj||"",onChange:a=>l("cnpj",a.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Inscrição Estadual"}),e.jsx("input",{value:s.ie||"",onChange:a=>l("ie",a.target.value)})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{type:"email",value:s.email||"",onChange:a=>l("email",a.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Telefone"}),e.jsx("input",{value:s.telefone||"",onChange:a=>l("telefone",a.target.value)})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"form-section-title",children:"WhatsApp & Redes Sociais"}),e.jsxs("div",{className:"form-group mb-4",children:[e.jsx("label",{className:"form-label",children:"WhatsApp (checkout)"}),e.jsx("input",{value:s.whatsapp||"",onChange:a=>l("whatsapp",a.target.value),placeholder:"5562999999999"}),e.jsx("span",{className:"form-hint",children:"Formato: DDI + DDD + Número (ex: 5562999999999)"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Instagram"}),e.jsx("input",{value:s.instagram||"",onChange:a=>l("instagram",a.target.value),placeholder:"https://instagram.com/..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Facebook"}),e.jsx("input",{value:s.facebook||"",onChange:a=>l("facebook",a.target.value),placeholder:"https://facebook.com/..."})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"form-section-title",children:"Endereço"}),e.jsxs("div",{className:"form-row mb-4",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"CEP"}),e.jsx("input",{value:s.cep||"",onChange:a=>l("cep",a.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Estado"}),e.jsx("input",{value:s.estado||"",onChange:a=>l("estado",a.target.value)})]})]}),e.jsxs("div",{className:"form-group mb-4",children:[e.jsx("label",{className:"form-label",children:"Logradouro"}),e.jsx("input",{value:s.logradouro||"",onChange:a=>l("logradouro",a.target.value)})]}),e.jsxs("div",{className:"form-row mb-4",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Número"}),e.jsx("input",{value:s.numero||"",onChange:a=>l("numero",a.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Complemento"}),e.jsx("input",{value:s.complemento||"",onChange:a=>l("complemento",a.target.value)})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Bairro"}),e.jsx("input",{value:s.bairro||"",onChange:a=>l("bairro",a.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Cidade"}),e.jsx("input",{value:s.cidade||"",onChange:a=>l("cidade",a.target.value)})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"form-section-title",children:"Visual"}),e.jsxs("div",{className:"form-row mb-4",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Cor Primária"}),e.jsx("input",{type:"color",value:s.cor_primaria||"#2563EB",onChange:a=>l("cor_primaria",a.target.value),style:{height:44,padding:4}})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Cor Secundária"}),e.jsx("input",{type:"color",value:s.cor_secundaria||"#1A2744",onChange:a=>l("cor_secundaria",a.target.value),style:{height:44,padding:4}})]})]}),e.jsxs("div",{className:"form-row mb-4",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Logo"}),s.logo_url&&e.jsx("img",{src:s.logo_url,alt:"Logo",style:{height:48,marginBottom:8,objectFit:"contain"}}),e.jsxs("label",{className:"btn btn-outline btn-sm",children:[e.jsx(j,{size:14})," Alterar Logo",e.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:a=>{var r;return N(((r=a.target.files)==null?void 0:r[0])||null)}})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Banner"}),s.banner_url&&e.jsx("img",{src:s.banner_url,alt:"Banner",style:{height:48,marginBottom:8,objectFit:"contain"}}),e.jsxs("label",{className:"btn btn-outline btn-sm",children:[e.jsx(j,{size:14})," Alterar Banner",e.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:a=>{var r;return C(((r=a.target.files)==null?void 0:r[0])||null)}})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Frete Grátis Acima de (R$)"}),e.jsx("input",{type:"number",step:"0.01",value:s.frete_gratis_acima||0,onChange:a=>l("frete_gratis_acima",Number(a.target.value))})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"form-section-title",children:"Textos Institucionais"}),e.jsxs("div",{className:"form-group mb-4",children:[e.jsx("label",{className:"form-label",children:"Sobre Nós"}),e.jsx("textarea",{value:s.sobre_nos||"",onChange:a=>l("sobre_nos",a.target.value),rows:5})]}),e.jsxs("div",{className:"form-group mb-4",children:[e.jsx("label",{className:"form-label",children:"Política de Troca"}),e.jsx("textarea",{value:s.politica_troca||"",onChange:a=>l("politica_troca",a.target.value),rows:5})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Política de Privacidade"}),e.jsx("textarea",{value:s.politica_privacidade||"",onChange:a=>l("politica_privacidade",a.target.value),rows:5})]})]}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsxs("button",{type:"submit",className:"btn btn-primary btn-lg",disabled:g,children:[e.jsx(F,{size:18})," ",g?"Salvando...":"Salvar Configurações"]})})]})]})}export{z as default};
